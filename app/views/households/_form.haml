= form_for [@occasion,@household], :html => {:role =>"form"} do |f|
  .row
    .col-xs-6
      .panel.panel-default
        .panel-heading
          %h3.panel-title Household Information
        .panel-body 
          .form-group{class: @household.errors.include?(:name) ? 'has-error' : ''}
            = f.text_field :name, placeholder: "Household Name (required)", :autofocus => true, :maxlength => 50, class: "form-control input-lg"
            %span.help-block
              This name is private and won't be shared with the guests.
              = @household.errors.get(:name).join('; ')
          .form-group
            = f.text_field :email, placeholder: "Email", :maxlength => 50, class: "form-control"
      
          .form-group
            = f.text_area :notes, {:rows => 5, :maxlength => 500, placeholder: "Notes", class: "form-control"}
            %span.help-block These notes are private and won't be shared with the guests.
        
      #guests
        = f.fields_for :guests do |guest|
          = render 'guest_fields', :f => guest
        .form-group
          = link_to_add_association 'Add Guest', f, :guests, :class => "btn btn-primary"
        
      .pull-right
        = f.submit "Save & Add more", :class => "btn btn-success btn-lg"
        = f.submit "Save & Finish", :class => "btn btn-success btn-lg"
      = link_to 'Cancel', occasion_invitations_path(@occasion), :class=> "btn btn-default btn-lg"


