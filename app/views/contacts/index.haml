= link_to "Add contacts", "#", :class => "button right", data: {remote: true, "reveal-id" => "myModal"}

%h1
  Address Book
  %small=pluralize(current_user.contacts.count, "contact")

-#.well.well-sm
  .row
    .columns.small-4
      %strong.text-muted Filters:
      %br
      =label_tag :facebook, "Only Facebook", {:class=> "control-label"}
      %br
      =select_tag :response, options_for_select(%w[Yes No]), :id => "facebook_tag", :prompt => "Please select"

-if @contacts.present?
  - @contacts.each do |contact|
    =link_to "Actions","#",class: "tiny button dropdown right", "data-dropdown" =>"drop#{contact.id}"
    %ul.f-dropdown{"data-dropdown-content" => true, id: "drop#{contact.id}"}
      %li=link_to "Edit contact", edit_contact_path(contact)
      %li.divider
      %li=link_to "Delete contact", contact, data: {confirm: 'Are you sure you want to delete this contact?'}, remote: true, method: :delete
        
    - if contact.notes.present?
      %h5
        %strong="#{contact.household_name}" 
        ="(#{contact.max_guests})"
        %small.subheader.has-tip{"data-tooltip" => true,title:contact.notes} notes
    - else
      %h5
        %strong="#{contact.household_name}"
        ="(#{contact.max_guests})"
    %p.subheader
      = "#{contact.address_1} #{contact.address_2 if contact.address_2.present? } <br>".html_safe if contact.address_1.present?
      = "#{contact.city}, #{contact.state} #{contact.zip} <br>".html_safe if ((contact.city.present? or contact.zip.present?) and (contact.country == 'United States'))
      = "#{contact.city}, #{contact.region} #{contact.postal_code} <br>".html_safe if ((!contact.region.blank? or !contact.postal_code.blank?) and (contact.country != 'United States'))
      = "#{contact.country} <br>".html_safe if contact.country != 'United States'
      = "<abbr title='Email'>E:</abbr> <a href='mailto:#{contact.email}'>#{contact.email}</a> <br>".html_safe  if !contact.email.blank?
      = "<abbr title='Home'>H:</abbr> #{contact.home_phone}, ".html_safe if !contact.home_phone.blank?
      = "<abbr title='Mobile'>M:</abbr> #{contact.cell_phone}".html_safe if !contact.cell_phone.blank?

    %hr
              
              
-else
  %p.text-center
    No contacts here.
    = link_to "Add contacts now!", "#", data: {remote: true, "reveal-id" => "myModal"}    

#myModal.reveal-modal{"data-reveal" => true}
  %a.close-reveal-modal &#215;
  %h2 Add contacts
  = link_to "Import from Facebook", user_omniauth_authorize_path(:facebook), :class => "button secondary", :style => "width:100%;", id: "facebook_import"
  = link_to 'Manually add contacts', new_contact_path, :class => "button secondary", :style => "width:100%;"